# \[POSIX\] POSIX Signal

## Phân Loại Tín Hiệu

### Các Tín Hiệu Cơ Bản - Standard Signals

|  Tín hiệu   | Giá trị  | Hành động | Bình luận                                                                           |
| :---------: | :------: | :-------: | :---------------------------------------------------------------------------------- |
| __SIGHUP__  |    1     |   Term    | Phát hiện treo máy trên thiết bị đầu cuối điều khiển hoặc chết quá trình điều khiển |
| __SIGINT__  |    2     |   Term    | Ngắt từ bàn phím                                                                    |
| __SIGQUIT__ |    3     |   Core    | Thoát khỏi bàn phím                                                                 |
| __SIGILL__  |    4     |   Core    | Hướng dẫn bất hợp pháp                                                              |
| __SIGABRT__ |    6     |   Core    | Tín hiệu hủy bỏ từ abort(3)                                                         |
| __SIGFPE__  |    8     |   Core    | Ngoại lệ dấu phẩy động                                                              |
| __SIGKILL__ |    9     |   Term    | Tín hiệu tiêu diệt                                                                  |
| __SIGSEGV__ |    11    |   Core    | Tham chiếu bộ nhớ không hợp lệ                                                      |
| __SIGPIPE__ |    13    |   Term    | Ống bị hỏng: ghi vào ống không có đầu đọc                                           |
| __SIGALRM__ |    14    |   Term    | Tín hiệu hẹn giờ từ cảnh báo(2)                                                     |
| __SIGTERM__ |    15    |   Term    | tín hiệu kết thúc                                                                   |
| __SIGUSR1__ | 30,10,16 |   Term    | Tín hiệu do người dùng xác định 1                                                   |
| __SIGUSR2__ | 31,12,17 |   Term    | Tín hiệu do người dùng xác định 2                                                   |
| __SIGCHLD__ | 20,17,18 |    Ign    | Trẻ dừng lại hoặc chấm dứt                                                          |
| __SIGCONT__ | 19,18,25 |   Cont    | Tiếp tục nếu dừng                                                                   |
| __SIGSTOP__ | 17,19,23 |   Stop    | Dừng quá trình                                                                      |
| __SIGTSTP__ | 18,20,24 |   Stop    | Dừng gõ ở thiết bị đầu cuối                                                         |
| __SIGTTIN__ | 21,21,26 |   Stop    | Đầu vào đầu cuối cho quá trình nền                                                  |
| __SIGTTOU__ | 22,22,27 |   Stop    | Đầu ra đầu cuối cho quá trình nền                                                   |

### Tất Cả Các Tín Hiệu

|                                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| :---------------------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| __SIGABRT__                               | Tín hiệu __SIGABRT__ được gửi tới một tiến trình để yêu cầu nó hủy bỏ, tức là chấm dứt. Tín hiệu thường được bắt đầu bởi chính tiến trình khi nó gọi chức năng hủy bỏ của Thư viện chuẩn C, nhưng nó có thể được gửi đến tiến trình từ bên ngoài giống như bất kỳ tín hiệu nào khác.                                                                                                                                                                                          |
| __SIGALRM__, __SIGVTALRM__ và __SIGPROF__ | Tín hiệu __SIGALRM__, __SIGVTALRM__ và __SIGPROF__ được gửi đến một quy trình khi hết thời hạn được chỉ định trong lệnh gọi tới chức năng cài đặt cảnh báo trước đó (chẳng hạn như setitimer). __SIGALRM__ được gửi khi thời gian thực hoặc thời gian đồng hồ trôi qua. __SIGVTALRM__ được gửi khi thời gian CPU được sử dụng bởi quá trình trôi qua. __SIGPROF__ được gửi khi hết thời gian CPU được sử dụng bởi tiến trình và hệ thống thay mặt cho tiến trình đó.          |
| __SIGBUS__                                | Tín hiệu __SIGBUS__ được gửi tới một tiến trình khi nó gây ra lỗi bus. Ví dụ: các điều kiện dẫn đến tín hiệu được gửi là căn chỉnh truy cập bộ nhớ không chính xác hoặc địa chỉ vật lý không tồn tại.                                                                                                                                                                                                                                                                         |
| __SIGCHLD__                               | Tín hiệu __SIGCHLD__ được gửi đến một tiến trình khi một tiến trình con kết thúc, bị gián đoạn hoặc tiếp tục lại sau khi bị gián đoạn. Một cách sử dụng phổ biến của tín hiệu là hướng dẫn hệ điều hành dọn sạch các tài nguyên được sử dụng bởi tiến trình con sau khi kết thúc mà không có lệnh gọi rõ ràng đến lệnh gọi hệ thống chờ.                                                                                                                                      |
| __SIGCONT__                               | Tín hiệu __SIGCONT__ hướng dẫn hệ điều hành tiếp tục (khởi động lại) quá trình đã bị tạm dừng trước đó bởi tín hiệu __SIGSTOP__ hoặc __SIGTSTP__. Một ứng dụng quan trọng của tín hiệu này là trong việc kiểm soát công việc trong Unix shell.                                                                                                                                                                                                                                |
| __SIGFPE__                                | Tín hiệu __SIGFPE__ được gửi đến một quy trình khi nó thực hiện một phép toán số học sai, chẳng hạn như chia cho 0 (tên "FPE", viết tắt của ngoại lệ dấu phẩy động, là một cách gọi sai vì tín hiệu cũng bao gồm các lỗi số học số nguyên).[2]                                                                                                                                                                                                                                |
| __SIGHUP__                                | Tín hiệu __SIGHUP__ được gửi đến một tiến trình khi thiết bị đầu cuối điều khiển của nó bị đóng. Ban đầu nó được thiết kế để thông báo quá trình rớt dòng nối tiếp (gác máy). Trong các hệ thống hiện đại, tín hiệu này thường có nghĩa là thiết bị đầu cuối giả hoặc ảo điều khiển đã bị đóng.[3] Nhiều daemon sẽ tải lại các tệp cấu hình của chúng và mở lại các tệp nhật ký thay vì thoát ra khi nhận được tín hiệu này.[4] Nohup là lệnh thực hiện lệnh bỏ qua tín hiệu. |
| __SIGILL__                                | Tín hiệu __SIGILL__ được gửi đến một tiến trình khi nó cố gắng thực hiện một lệnh không hợp lệ, không đúng định dạng, không xác định hoặc có đặc quyền.                                                                                                                                                                                                                                                                                                                       |
| __SIGINT__                                | Tín hiệu __SIGINT__ được gửi đến một tiến trình bằng thiết bị đầu cuối điều khiển của nó khi người dùng muốn làm gián đoạn quá trình. Quá trình này thường được bắt đầu bằng cách nhấn Ctrl-C, nhưng trên một số hệ thống, có thể sử dụng ký tự "xóa" hoặc phím "ngắt".[5]                                                                                                                                                                                                    |
| __SIGKILL__                               | Tín hiệu __SIGKILL__ được gửi đến một tiến trình để khiến nó kết thúc ngay lập tức (hủy). Ngược lại với __SIGTERM__ và __SIGINT__, tín hiệu này không thể bị bắt hoặc bỏ qua và quá trình nhận không thể thực hiện bất kỳ hoạt động dọn dẹp nào khi nhận được tín hiệu này.                                                                                                                                                                                                   |
| __SIGPIPE__                               | Tín hiệu __SIGPIPE__ được gửi đến một tiến trình khi nó cố gắng ghi vào một đường ống mà không có một tiến trình nào được kết nối với đầu bên kia.                                                                                                                                                                                                                                                                                                                            |
| __SIGPOLL__                               | Tín hiệu __SIGPOLL__ được gửi khi một sự kiện xảy ra trên bộ mô tả tệp được xem rõ ràng.[6] Việc sử dụng nó một cách hiệu quả sẽ dẫn đến việc thực hiện các yêu cầu I/O không đồng bộ vì kernel sẽ thăm dò bộ mô tả thay cho trình gọi. Nó cung cấp một giải pháp thay thế cho việc bỏ phiếu tích cực.                                                                                                                                                                        |
| __SIGRTMIN__ to __SIGRTMAX__              | Tín hiệu __SIGRTMIN__ đến __SIGRTMAX__ được thiết kế để sử dụng cho các mục đích do người dùng xác định. Chúng là những tín hiệu thời gian thực.                                                                                                                                                                                                                                                                                                                              |
| __SIGQUIT__                               | Tín hiệu __SIGQUIT__ được gửi đến một quy trình bằng thiết bị đầu cuối điều khiển của nó khi người dùng yêu cầu quy trình thoát và thực hiện kết xuất lõi.                                                                                                                                                                                                                                                                                                                    |
| __SIGSEGV__                               | Tín hiệu __SIGSEGV__ được gửi đến một tiến trình khi nó tạo ra một tham chiếu bộ nhớ ảo không hợp lệ hoặc lỗi phân đoạn, tức là khi nó thực hiện vi phạm phân đoạn.[7]                                                                                                                                                                                                                                                                                                        |
| __SIGSTOP__                               | Tín hiệu __SIGSTOP__ hướng dẫn hệ điều hành dừng một quá trình để tiếp tục lại sau này.                                                                                                                                                                                                                                                                                                                                                                                       |
| __SIGSYS__                                | Tín hiệu __SIGSYS__ được gửi tới một tiến trình khi nó chuyển một đối số không hợp lệ cho lệnh gọi hệ thống. Trong thực tế, loại tín hiệu này hiếm khi gặp phải vì các ứng dụng dựa vào các thư viện (ví dụ: libc) để thực hiện lệnh gọi cho chúng.                                                                                                                                                                                                                           |
| __SIGTERM__                               | Tín hiệu __SIGTERM__ được gửi tới một tiến trình để yêu cầu chấm dứt nó. Không giống như tín hiệu __SIGKILL__, nó có thể bị bắt và giải thích hoặc bỏ qua bởi quy trình. Điều này cho phép quá trình thực hiện việc chấm dứt giải phóng tài nguyên và lưu trạng thái nếu thích hợp. __SIGINT__ gần giống với __SIGTERM__.                                                                                                                                                     |
| __SIGTSTP__                               | Tín hiệu __SIGTSTP__ được gửi đến một tiến trình bằng thiết bị đầu cuối điều khiển của nó để yêu cầu nó dừng tạm thời. Nó thường được bắt đầu bởi người dùng nhấn Ctrl-Z. Không giống như __SIGSTOP__, quy trình có thể đăng ký bộ xử lý tín hiệu hoặc bỏ qua tín hiệu.                                                                                                                                                                                                       |
| __SIGTTIN__ và __SIGTTOU__                | Tín hiệu __SIGTTIN__ và __SIGTTOU__ được gửi đến một tiến trình khi nó cố gắng đọc vào hoặc ghi ra tương ứng từ tty trong khi ở chế độ nền. Thông thường, những tín hiệu này chỉ được nhận bởi các quy trình được kiểm soát công việc; daemon không có thiết bị đầu cuối điều khiển và do đó sẽ không bao giờ nhận được các tín hiệu này.                                                                                                                                     |
| __SIGTRAP__                               | Tín hiệu __SIGTRAP__ được gửi đến một quy trình khi xảy ra ngoại lệ (hoặc bẫy): một điều kiện mà trình gỡ lỗi đã yêu cầu được thông báo - ví dụ: khi một hàm cụ thể được thực thi hoặc khi một biến cụ thể thay đổi giá trị.                                                                                                                                                                                                                                                  |
| __SIGURG__                                | Tín hiệu __SIGURG__ được gửi đến một quy trình khi ổ cắm có sẵn dữ liệu khẩn cấp hoặc ngoài băng tần để đọc.                                                                                                                                                                                                                                                                                                                                                                  |
| __SIGUSR1__ và __SIGUSR2__                | Tín hiệu __SIGUSR1__ và __SIGUSR2__ được gửi đến một quy trình để biểu thị các điều kiện do người dùng xác định.                                                                                                                                                                                                                                                                                                                                                              |
| __SIGXCPU__                               | Tín hiệu __SIGXCPU__ được gửi đến một tiến trình khi nó đã sử dụng hết CPU trong khoảng thời gian vượt quá giá trị có thể cài đặt trước nhất định của người dùng.[8] Sự xuất hiện của tín hiệu __SIGXCPU__ tạo cơ hội cho quá trình nhận nhanh chóng lưu mọi kết quả trung gian và thoát ra một cách nhẹ nhàng trước khi hệ điều hành chấm dứt bằng tín hiệu __SIGKILL__.                                                                                                     |
| __SIGXFSZ__                               | Tín hiệu __SIGXFSZ__ được gửi tới một tiến trình khi nó phát triển một tệp lớn hơn kích thước tối đa cho phép.                                                                                                                                                                                                                                                                                                                                                                |

### Các Tín Hiệu Thông Dụng

Các tín hiệu thông dụng nhất là như dưới đây:

|  Tín hiệu   | Ý nghĩa hệ thống                           | Nguyên nhân thường gặp                                                                                                                        |
| :---------: | :----------------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------- |
| __SIGABRT__ | Chấm dứt bất thường (Abort)                | Do hàm `abort()` được gọi. Thường xảy ra khi một thư viện (như libc) phát hiện lỗi nghiêm trọng không thể hồi phục (ví dụ: hỏng bộ nhớ heap). |
| __SIGSEGV__ | Lỗi phân đoạn (Segmentation Fault)         | Truy cập địa chỉ bộ nhớ không hợp lệ hoặc không có quyền ghi vào vùng nhớ chỉ đọc.                                                            |
| __SIGBUS__  | Lỗi Bus                                    | Truy cập bộ nhớ không đúng quy cách (alignment) hoặc lỗi phần cứng khi ánh xạ file vào bộ nhớ (mmap).                                         |
| __SIGFPE__  | Lỗi số học (Floating Point Exception)      | Chia cho 0 hoặc lỗi tràn số học nghiêm trọng.                                                                                                 |
| __SIGILL__  | Chỉ thị không hợp lệ (Illegal Instruction) | CPU cố gắng thực thi mã máy bị hỏng hoặc không được hỗ trợ.                                                                                   |